{% extends "base.html" %}

{% block title %}Importeer Films - MovieSpace{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto space-y-8">
    <div>
        <a href="/lists" class="text-accent hover:underline mb-4 inline-block">â† Terug naar Lijsten</a>
        <h1 class="text-4xl font-bold text-white mb-2">ğŸ“¥ Importeer Films</h1>
        <p class="text-gray-400">Importeer je watchlist of andere lijsten van Letterboxd of IMDb</p>
    </div>

    <!-- Import Form -->
    <div class="bg-secondary p-8 rounded-lg shadow-lg">
        <form method="post" action="/import/csv" enctype="multipart/form-data" class="space-y-6">
            <!-- File Upload -->
            <div>
                <label for="file" class="block text-lg font-medium text-gray-300 mb-3">
                    1. Selecteer CSV Bestand
                </label>
                <input type="file"
                       name="file"
                       id="file"
                       accept=".csv"
                       required
                       class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-md text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-accent file:text-white hover:file:bg-green-600 focus:outline-none focus:ring-2 focus:ring-accent">
                <p class="text-gray-500 text-sm mt-2">Upload een .csv bestand geÃ«xporteerd van Letterboxd of IMDb</p>
            </div>

            <!-- Import Type -->
            <div>
                <label class="block text-lg font-medium text-gray-300 mb-3">
                    2. Kies Platform
                </label>
                <div class="space-y-3">
                    <label class="flex items-center space-x-3 bg-gray-700 p-4 rounded-md cursor-pointer hover:bg-gray-600 transition-colors">
                        <input type="radio"
                               name="import_type"
                               value="letterboxd"
                               checked
                               class="w-4 h-4 text-accent focus:ring-accent">
                        <div>
                            <span class="text-white font-medium">Letterboxd</span>
                            <p class="text-gray-400 text-sm">Format: Date, Name, Year, Letterboxd URI</p>
                        </div>
                    </label>
                    <label class="flex items-center space-x-3 bg-gray-700 p-4 rounded-md cursor-pointer hover:bg-gray-600 transition-colors">
                        <input type="radio"
                               name="import_type"
                               value="imdb"
                               class="w-4 h-4 text-accent focus:ring-accent">
                        <div>
                            <span class="text-white font-medium">IMDb</span>
                            <p class="text-gray-400 text-sm">Format: IMDb export met Title kolom</p>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Target Selection -->
            <div>
                <label for="target" class="block text-lg font-medium text-gray-300 mb-3">
                    3. Importeer Naar
                </label>
                <select name="target"
                        id="target"
                        required
                        class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-accent">
                    <option value="watchlist">ğŸ“‹ Watchlist</option>
                    <option value="watched">âœ… Gekeken</option>
                    {% if custom_lists %}
                    <optgroup label="Eigen Lijsten">
                        {% for list in custom_lists %}
                        <option value="{{ list.id }}">ğŸ“‚ {{ list.name }}</option>
                        {% endfor %}
                    </optgroup>
                    {% endif %}
                </select>
                {% if not custom_lists %}
                <p class="text-gray-500 text-sm mt-2">
                    Tip: <a href="/lists" class="text-accent hover:underline">Maak eerst een lijst</a> om films naar een eigen lijst te importeren.
                </p>
                {% endif %}
            </div>

            <!-- Submit -->
            <button type="submit"
                    id="importBtn"
                    onclick="this.disabled=true; this.innerHTML='â³ Bezig met importeren...'; this.form.submit();"
                    class="w-full bg-accent hover:bg-green-600 text-white py-4 rounded-md font-medium text-lg transition-colors">
                ğŸ“¥ Importeer Films
            </button>
            <p class="text-gray-400 text-sm text-center mt-2">
                âš ï¸ Grote lijsten kunnen enkele minuten duren. Maximum: 1000 films.
            </p>
    </div>

    <!-- Instructions -->
    <div class="bg-secondary p-6 rounded-lg">
        <h2 class="text-xl font-bold text-white mb-4">ğŸ“– Hoe te Exporteren</h2>

        <div class="space-y-4">
            <div>
                <h3 class="text-lg font-semibold text-accent mb-2">Van Letterboxd:</h3>
                <ol class="list-decimal list-inside text-gray-300 space-y-1">
                    <li>Ga naar je profiel â†’ Settings â†’ Import & Export</li>
                    <li>Klik op "Export Your Data"</li>
                    <li>Download de ZIP en pak uit</li>
                    <li>Upload het <code class="bg-gray-700 px-2 py-1 rounded">watchlist.csv</code> bestand</li>
                </ol>
            </div>

            <div>
                <h3 class="text-lg font-semibold text-accent mb-2">Van IMDb:</h3>
                <ol class="list-decimal list-inside text-gray-300 space-y-1">
                    <li>Ga naar je Watchlist of Ratings pagina</li>
                    <li>Klik op de drie puntjes (â‹®) rechtsboven</li>
                    <li>Kies "Export"</li>
                    <li>Download het CSV bestand</li>
                    <li>Upload het hier</li>
                </ol>
            </div>
        </div>
    </div>
</div>
{% endblock %}